(this.webpackJsonprevision=this.webpackJsonprevision||[]).push([[0],{157:function(e,t,n){},158:function(e,t,n){},183:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),s=n(37),i=n.n(s),c=(n(157),n(158),n(62)),a=n(63),d=n(76),l=n(74),u=n(38),p=n(201),f=n(59),y=n(5),h=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(y.jsxs)(p.a,{children:[Object(y.jsx)(u.b,{to:"/",children:Object(y.jsx)(p.a.Item,{header:!0,children:"Revision"})}),Object(y.jsx)(u.b,{to:"/data",children:Object(y.jsx)(p.a.Item,{children:Object(y.jsx)(f.a,{name:"save"})})})]})}}]),n}(r.Component),j=n(10),b=n(202),g=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"getCardUrl",value:function(){return"/story/"+this.props.story.id}},{key:"render",value:function(){return Object(y.jsx)(u.b,{to:this.getCardUrl(),children:Object(y.jsxs)(b.a,{style:{margin:"8px"},children:[Object(y.jsx)(b.a.Content,{header:this.props.story.name}),Object(y.jsx)(b.a.Content,{children:this.props.story.description.split("\n").map((function(e,t){return Object(y.jsx)("p",{children:e},t)}))})]})})}}]),n}(r.Component),O=n(204),m=n(205),S=n(184),v=n(140),x=n(110),w=n(31),k="story-ids";function I(e){return"story-".concat(e)}function N(){return W().map((function(e){return function(e){var t=localStorage.getItem(I(e));if(!t)throw Error("Unable to read story ".concat(e," from local storage"));return w.Story.create(JSON.parse(t))}(e)}))}function W(){var e=localStorage.getItem(k)||"[]";return JSON.parse(e)}function L(e){localStorage.setItem(k,JSON.stringify(e))}function D(e){localStorage.setItem(I(e.id),JSON.stringify(e))}function P(e){D(e);var t=W();t.push(e.id),L(t)}var C=function(){var e={storyMap:{}};return N().forEach((function(t){e.storyMap[t.id]=t.toJSON()})),e}(),J="storyList",A=Object(x.b)({name:J,initialState:C,reducers:{createStory:function(e,t){e.storyMap[t.payload.id]=t.payload},updateStory:function(e,t){e.storyMap[t.payload.id]=t.payload},removeStory:function(e,t){delete e.storyMap[t.payload]}}}),T=function(e){return function(e){return function(t){var n=e(t);return t.type.startsWith("storyList/")&&E(t),n}}},E=function(e){switch(e.type){case"".concat(J,"/createStory"):P(e.payload);break;case"".concat(J,"/updateStory"):D(e.payload);break;case"".concat(J,"/removeStory"):t=e.payload,L(W().filter((function(e){return e!==t}))),localStorage.removeItem(I(t))}var t},M=function(e){for(var t={},n=0,r=Object.entries(e.storyList.storyMap);n<r.length;n++){var o=Object(v.a)(r[n],2),s=o[0],i=o[1];t[s]=w.Story.fromObject(i)}return t},B=A.actions,U=B.createStory,V=B.updateStory,z=B.removeStory,G=A.reducer,F=n(87),R=function(){return Object(F.b)()},_=F.c,$=n(203);function q(e){var t=Object.values(e);return t.length?Object(y.jsx)(O.a,{style:{display:"flex",flexWrap:"wrap"},children:t.map((function(e,t){return Object(y.jsx)(g,{story:e},t)}))}):Object(y.jsx)(O.a,{children:"Whoops, no stories yet"})}function H(){var e=_(M),t=R(),n=Object(j.f)();return Object(y.jsx)("div",{style:{margin:"24px"},children:Object(y.jsxs)(O.a.Group,{children:[Object(y.jsxs)(O.a,{style:{display:"flex"},children:[Object(y.jsxs)(m.a,{size:"medium",children:["Story List",Object(y.jsx)(m.a.Subheader,{children:"All your stories"})]}),Object(y.jsx)("div",{style:{flex:1,textAlign:"right"},children:Object(y.jsx)(S.a,{icon:!0,color:"green",onClick:function(){var e=w.Story.create({id:Object($.a)(),name:"New Story",description:"A story about something"}).toJSON();t(U(e)),n.push("/story/".concat(e.id))},children:Object(y.jsx)(f.a,{name:"add"})})})]}),q(e)]})})}var K=n(200),Q=n(198),X=n(199),Y=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"onNameChange",value:function(e){var t=this.props.story;t.name=e,this.props.onStoryChange(t)}},{key:"onDescriptionChange",value:function(e){var t=this.props.story;t.description=e,this.props.onStoryChange(t)}},{key:"render",value:function(){var e=this;return this.props.story?Object(y.jsxs)(O.a.Group,{style:{margin:"24px"},children:[Object(y.jsxs)(O.a,{style:{display:"flex"},children:[Object(y.jsxs)(m.a,{children:["Story Details",Object(y.jsx)(m.a.Subheader,{children:"Set the title, top-level description here"})]}),Object(y.jsx)("div",{style:{flex:1,textAlign:"right"},children:Object(y.jsx)(S.a,{icon:!0,color:"red",onClick:function(){return e.props.onStoryDelete()},children:Object(y.jsx)(f.a,{name:"delete"})})})]}),Object(y.jsx)(O.a,{children:Object(y.jsxs)(K.a,{children:[Object(y.jsxs)(K.a.Field,{children:[Object(y.jsx)("label",{children:"Story Name"}),Object(y.jsx)(Q.a,{defaultValue:this.props.story.name,onChange:function(t){return e.onNameChange(t.target.value)}})]}),Object(y.jsxs)(K.a.Field,{children:[Object(y.jsx)("label",{children:"Story Description"}),Object(y.jsx)(X.a,{rows:2,defaultValue:this.props.story.description,onChange:function(t){return e.onDescriptionChange(t.target.value)}})]})]})})]}):Object(y.jsx)("div",{children:"Whoops, could not find story"})}}]),n}(r.Component);function Z(e){var t,n,r=_((n=null===(t=e.match.params)||void 0===t?void 0:t.id,function(e){var t=e.storyList.storyMap[n];return t?w.Story.create(t):null})),o=R(),s=Object(j.f)();return Object(y.jsx)(Y,{story:r,onStoryChange:function(e){return o(V(e.toJSON()))},onStoryDelete:function(){o(z(r.id)),s.push("/")}})}var ee=n(126),te=n.n(ee),ne=n(137),re=n(138),oe=n.n(re);function se(){var e="writing_workspace_"+Date.now()+".write";oe()(function(){var e=w.WritingWorkspace.create({stories:N()});return w.WritingWorkspace.encode(e).finish()}(),e)}function ie(){return(ie=Object(ne.a)(te.a.mark((function e(t){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t[0].text();case 4:n=e.sent,ce((new TextEncoder).encode(n)),window.location.reload();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){var t=w.WritingWorkspace.decode(e);localStorage.clear(),t.stories.forEach((function(e){P(e)}))}function ae(){var e=_(M);return Object(y.jsx)("div",{style:{margin:"24px"},children:Object(y.jsxs)(O.a.Group,{children:[Object(y.jsx)(O.a,{style:{display:"flex"},children:Object(y.jsxs)(m.a,{size:"medium",children:["Data Management",Object(y.jsx)(m.a.Subheader,{children:"Load, Save, or Clear your Workspace"})]})}),Object(y.jsxs)(O.a,{children:[Object.keys(e).length," Stories"]}),Object(y.jsxs)(O.a,{children:[Object(y.jsx)(S.a,{color:"green",onClick:function(){se()},children:"Download Workspace"}),Object(y.jsx)(S.a,{color:"red",onClick:function(){localStorage.clear(),window.location.reload()},children:"Clear Workspace"})]}),Object(y.jsxs)(O.a,{children:[Object(y.jsx)(m.a,{size:"small",children:"Upload Workspace"}),Object(y.jsx)("input",{type:"file",accept:".write",onChange:function(e){return function(e){return ie.apply(this,arguments)}(e.target.files)}})]})]})})}var de=function(){return Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h,{}),Object(y.jsxs)(j.c,{children:[Object(y.jsx)(j.a,{path:"/data",component:ae}),Object(y.jsx)(j.a,{path:"/story/:id",component:Z}),Object(y.jsx)(j.a,{path:"/",component:H})]})]})},le=Object(x.a)({reducer:{storyList:G},middleware:function(e){return e().concat([T])}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(182);i.a.render(Object(y.jsx)(o.a.StrictMode,{children:Object(y.jsx)(F.a,{store:le,children:Object(y.jsx)(de,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},31:function(e,t,n){var r,o,s;o=[n(166)],void 0===(s="function"===typeof(r=function(e){"use strict";var t=e.Reader,n=e.Writer,r=e.util,o=e.roots.default||(e.roots.default={});return o.Timestamp=function(){function s(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return s.prototype.seconds=r.Long?r.Long.fromBits(0,0,!1):0,s.prototype.nanos=0,s.create=function(e){return new s(e)},s.encode=function(e,t){return t||(t=n.create()),null!=e.seconds&&Object.hasOwnProperty.call(e,"seconds")&&t.uint32(8).int64(e.seconds),null!=e.nanos&&Object.hasOwnProperty.call(e,"nanos")&&t.uint32(16).int32(e.nanos),t},s.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},s.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,s=new o.Timestamp;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:s.seconds=e.int64();break;case 2:s.nanos=e.int32();break;default:e.skipType(7&i)}}return s},s.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},s.verify=function(e){return"object"!==typeof e||null===e?"object expected":null==e.seconds||!e.hasOwnProperty("seconds")||r.isInteger(e.seconds)||e.seconds&&r.isInteger(e.seconds.low)&&r.isInteger(e.seconds.high)?null!=e.nanos&&e.hasOwnProperty("nanos")&&!r.isInteger(e.nanos)?"nanos: integer expected":null:"seconds: integer|Long expected"},s.fromObject=function(e){if(e instanceof o.Timestamp)return e;var t=new o.Timestamp;return null!=e.seconds&&(r.Long?(t.seconds=r.Long.fromValue(e.seconds)).unsigned=!1:"string"===typeof e.seconds?t.seconds=parseInt(e.seconds,10):"number"===typeof e.seconds?t.seconds=e.seconds:"object"===typeof e.seconds&&(t.seconds=new r.LongBits(e.seconds.low>>>0,e.seconds.high>>>0).toNumber())),null!=e.nanos&&(t.nanos=0|e.nanos),t},s.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(r.Long){var o=new r.Long(0,0,!1);n.seconds=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.seconds=t.longs===String?"0":0;n.nanos=0}return null!=e.seconds&&e.hasOwnProperty("seconds")&&("number"===typeof e.seconds?n.seconds=t.longs===String?String(e.seconds):e.seconds:n.seconds=t.longs===String?r.Long.prototype.toString.call(e.seconds):t.longs===Number?new r.LongBits(e.seconds.low>>>0,e.seconds.high>>>0).toNumber():e.seconds),null!=e.nanos&&e.hasOwnProperty("nanos")&&(n.nanos=e.nanos),n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),o.Duration=function(){function s(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return s.prototype.seconds=r.Long?r.Long.fromBits(0,0,!1):0,s.prototype.nanos=0,s.create=function(e){return new s(e)},s.encode=function(e,t){return t||(t=n.create()),null!=e.seconds&&Object.hasOwnProperty.call(e,"seconds")&&t.uint32(8).int64(e.seconds),null!=e.nanos&&Object.hasOwnProperty.call(e,"nanos")&&t.uint32(16).int32(e.nanos),t},s.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},s.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,s=new o.Duration;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:s.seconds=e.int64();break;case 2:s.nanos=e.int32();break;default:e.skipType(7&i)}}return s},s.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},s.verify=function(e){return"object"!==typeof e||null===e?"object expected":null==e.seconds||!e.hasOwnProperty("seconds")||r.isInteger(e.seconds)||e.seconds&&r.isInteger(e.seconds.low)&&r.isInteger(e.seconds.high)?null!=e.nanos&&e.hasOwnProperty("nanos")&&!r.isInteger(e.nanos)?"nanos: integer expected":null:"seconds: integer|Long expected"},s.fromObject=function(e){if(e instanceof o.Duration)return e;var t=new o.Duration;return null!=e.seconds&&(r.Long?(t.seconds=r.Long.fromValue(e.seconds)).unsigned=!1:"string"===typeof e.seconds?t.seconds=parseInt(e.seconds,10):"number"===typeof e.seconds?t.seconds=e.seconds:"object"===typeof e.seconds&&(t.seconds=new r.LongBits(e.seconds.low>>>0,e.seconds.high>>>0).toNumber())),null!=e.nanos&&(t.nanos=0|e.nanos),t},s.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(r.Long){var o=new r.Long(0,0,!1);n.seconds=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.seconds=t.longs===String?"0":0;n.nanos=0}return null!=e.seconds&&e.hasOwnProperty("seconds")&&("number"===typeof e.seconds?n.seconds=t.longs===String?String(e.seconds):e.seconds:n.seconds=t.longs===String?r.Long.prototype.toString.call(e.seconds):t.longs===Number?new r.LongBits(e.seconds.low>>>0,e.seconds.high>>>0).toNumber():e.seconds),null!=e.nanos&&e.hasOwnProperty("nanos")&&(n.nanos=e.nanos),n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),o.Story=function(){function s(e){if(this.relatedStoryIds=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return s.prototype.id="",s.prototype.name="",s.prototype.description="",s.prototype.duration=null,s.prototype.relatedStoryIds=r.emptyArray,s.create=function(e){return new s(e)},s.encode=function(e,t){if(t||(t=n.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(10).string(e.id),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.duration&&Object.hasOwnProperty.call(e,"duration")&&o.Duration.encode(e.duration,t.uint32(26).fork()).ldelim(),null!=e.relatedStoryIds&&e.relatedStoryIds.length)for(var r=0;r<e.relatedStoryIds.length;++r)t.uint32(34).string(e.relatedStoryIds[r]);return null!=e.description&&Object.hasOwnProperty.call(e,"description")&&t.uint32(42).string(e.description),t},s.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},s.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,s=new o.Story;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:s.id=e.string();break;case 2:s.name=e.string();break;case 5:s.description=e.string();break;case 3:s.duration=o.Duration.decode(e,e.uint32());break;case 4:s.relatedStoryIds&&s.relatedStoryIds.length||(s.relatedStoryIds=[]),s.relatedStoryIds.push(e.string());break;default:e.skipType(7&i)}}return s},s.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},s.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.id&&e.hasOwnProperty("id")&&!r.isString(e.id))return"id: string expected";if(null!=e.name&&e.hasOwnProperty("name")&&!r.isString(e.name))return"name: string expected";if(null!=e.description&&e.hasOwnProperty("description")&&!r.isString(e.description))return"description: string expected";if(null!=e.duration&&e.hasOwnProperty("duration")){var t=o.Duration.verify(e.duration);if(t)return"duration."+t}if(null!=e.relatedStoryIds&&e.hasOwnProperty("relatedStoryIds")){if(!Array.isArray(e.relatedStoryIds))return"relatedStoryIds: array expected";for(var n=0;n<e.relatedStoryIds.length;++n)if(!r.isString(e.relatedStoryIds[n]))return"relatedStoryIds: string[] expected"}return null},s.fromObject=function(e){if(e instanceof o.Story)return e;var t=new o.Story;if(null!=e.id&&(t.id=String(e.id)),null!=e.name&&(t.name=String(e.name)),null!=e.description&&(t.description=String(e.description)),null!=e.duration){if("object"!==typeof e.duration)throw TypeError(".Story.duration: object expected");t.duration=o.Duration.fromObject(e.duration)}if(e.relatedStoryIds){if(!Array.isArray(e.relatedStoryIds))throw TypeError(".Story.relatedStoryIds: array expected");t.relatedStoryIds=[];for(var n=0;n<e.relatedStoryIds.length;++n)t.relatedStoryIds[n]=String(e.relatedStoryIds[n])}return t},s.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.relatedStoryIds=[]),t.defaults&&(n.id="",n.name="",n.duration=null,n.description=""),null!=e.id&&e.hasOwnProperty("id")&&(n.id=e.id),null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.duration&&e.hasOwnProperty("duration")&&(n.duration=o.Duration.toObject(e.duration,t)),e.relatedStoryIds&&e.relatedStoryIds.length){n.relatedStoryIds=[];for(var r=0;r<e.relatedStoryIds.length;++r)n.relatedStoryIds[r]=e.relatedStoryIds[r]}return null!=e.description&&e.hasOwnProperty("description")&&(n.description=e.description),n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),o.WritingWorkspace=function(){function s(e){if(this.stories=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return s.prototype.stories=r.emptyArray,s.create=function(e){return new s(e)},s.encode=function(e,t){if(t||(t=n.create()),null!=e.stories&&e.stories.length)for(var r=0;r<e.stories.length;++r)o.Story.encode(e.stories[r],t.uint32(10).fork()).ldelim();return t},s.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},s.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,s=new o.WritingWorkspace;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:s.stories&&s.stories.length||(s.stories=[]),s.stories.push(o.Story.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return s},s.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},s.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.stories&&e.hasOwnProperty("stories")){if(!Array.isArray(e.stories))return"stories: array expected";for(var t=0;t<e.stories.length;++t){var n=o.Story.verify(e.stories[t]);if(n)return"stories."+n}}return null},s.fromObject=function(e){if(e instanceof o.WritingWorkspace)return e;var t=new o.WritingWorkspace;if(e.stories){if(!Array.isArray(e.stories))throw TypeError(".WritingWorkspace.stories: array expected");t.stories=[];for(var n=0;n<e.stories.length;++n){if("object"!==typeof e.stories[n])throw TypeError(".WritingWorkspace.stories: object expected");t.stories[n]=o.Story.fromObject(e.stories[n])}}return t},s.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.stories=[]),e.stories&&e.stories.length){n.stories=[];for(var r=0;r<e.stories.length;++r)n.stories[r]=o.Story.toObject(e.stories[r],t)}return n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),o})?r.apply(t,o):r)||(e.exports=s)}},[[183,1,2]]]);
//# sourceMappingURL=main.6f580366.chunk.js.map