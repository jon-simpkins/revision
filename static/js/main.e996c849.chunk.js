(this.webpackJsonprevision=this.webpackJsonprevision||[]).push([[0],{118:function(e,t,n){},119:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),s=n(25),i=n.n(s),c=(n(118),n(119),n(43)),a=n(44),d=n(55),u=n(52),l=n(38),p=n(157),f=n(58),y=n(4),h=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(y.jsxs)(p.a,{children:[Object(y.jsx)(l.b,{to:"/",children:Object(y.jsx)(p.a.Item,{header:!0,children:"Revision"})}),Object(y.jsx)(l.b,{to:"/data",children:Object(y.jsx)(p.a.Item,{children:Object(y.jsx)(f.a,{name:"save"})})})]})}}]),n}(r.Component),j=n(10),g=n(158),b=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"getCardUrl",value:function(){return"/story/"+this.props.story.id}},{key:"render",value:function(){return Object(y.jsx)(l.b,{to:this.getCardUrl(),children:Object(y.jsxs)(g.a,{style:{margin:"8px"},children:[Object(y.jsx)(g.a.Content,{header:this.props.story.name}),Object(y.jsx)(g.a.Content,{children:this.props.story.description.split("\n").map((function(e,t){return Object(y.jsx)("p",{children:e},t)}))})]})})}}]),n}(r.Component),O=n(162),m=n(163),S=n(160),v=n(103),w=n(73),x=n(22),k="story-ids";function I(e){return"story-".concat(e)}function W(){return N().map((function(e){return function(e){var t=localStorage.getItem(I(e));if(!t)throw Error("Unable to read story ".concat(e," from local storage"));return x.Story.create(JSON.parse(t))}(e)}))}function N(){var e=localStorage.getItem(k)||"[]";return JSON.parse(e)}function L(e){localStorage.setItem(k,JSON.stringify(e))}function P(e){localStorage.setItem(I(e.id),JSON.stringify(e.toJSON()))}function D(e){P(e);var t=N();t.push(e.id),L(t)}var J=function(){var e={storyMap:{}};return W().forEach((function(t){e.storyMap[t.id]=t.toJSON()})),e}(),T="storyList",A=Object(w.b)({name:T,initialState:J,reducers:{createStory:function(e,t){e.storyMap[t.payload.id]=t.payload.toJSON()},updateStory:function(e,t){e.storyMap[t.payload.id]=t.payload.toJSON()},removeStory:function(e,t){delete e.storyMap[t.payload]}}}),C=function(e){return function(e){return function(t){var n=e(t);return t.type.startsWith("storyList/")&&E(t),n}}},E=function(e){switch(e.type){case"".concat(T,"/createStory"):D(e.payload);break;case"".concat(T,"/updateStory"):P(e.payload);break;case"".concat(T,"/removeStory"):t=e.payload,L(N().filter((function(e){return e!==t}))),localStorage.removeItem(I(t))}var t},B=function(e){for(var t={},n=0,r=Object.entries(e.storyList.storyMap);n<r.length;n++){var o=Object(v.a)(r[n],2),s=o[0],i=o[1];t[s]=x.Story.fromObject(i)}return t},M=A.actions,U=M.createStory,z=(M.updateStory,M.removeStory,A.reducer),G=n(63),R=G.c,V=n(159);function _(e){var t=Object.values(e);return t.length?Object(y.jsx)(O.a,{style:{display:"flex",flexWrap:"wrap"},children:t.map((function(e,t){return Object(y.jsx)(b,{story:e},t)}))}):Object(y.jsx)(O.a,{children:"Whoops, no stories yet"})}function $(){var e=R(B),t=Object(G.b)();return Object(y.jsx)("div",{style:{margin:"24px"},children:Object(y.jsxs)(O.a.Group,{children:[Object(y.jsxs)(O.a,{style:{display:"flex"},children:[Object(y.jsxs)(m.a,{size:"medium",children:["Story List",Object(y.jsx)(m.a.Subheader,{children:"All your stories"})]}),Object(y.jsx)("div",{style:{flex:1,textAlign:"right"},children:Object(y.jsx)(S.a,{icon:!0,color:"green",onClick:function(){t(U(x.Story.create({id:Object(V.a)(),name:"New Story",description:"A story about something"})))},children:Object(y.jsx)(f.a,{name:"add"})})})]}),_(e)]})})}var q=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"getId",value:function(){return this.props.match.params.id}},{key:"render",value:function(){return Object(y.jsxs)("div",{children:["This is the details for ",this.getId()]})}}]),n}(r.Component),F=n(88),H=n.n(F),K=n(100),Q=n(101),X=n.n(Q);function Y(){var e="writing_workspace_"+Date.now()+".write";X()(function(){var e=x.WritingWorkspace.create({stories:W()});return x.WritingWorkspace.encode(e).finish()}(),e)}function Z(){return(Z=Object(K.a)(H.a.mark((function e(t){var n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t[0].text();case 4:n=e.sent,ee((new TextEncoder).encode(n)),window.location.reload();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){var t=x.WritingWorkspace.decode(e);localStorage.clear(),t.stories.forEach((function(e){D(x.Story.create(e))}))}function te(){var e=R(B);return Object(y.jsx)("div",{style:{margin:"24px"},children:Object(y.jsxs)(O.a.Group,{children:[Object(y.jsx)(O.a,{style:{display:"flex"},children:Object(y.jsxs)(m.a,{size:"medium",children:["Data Management",Object(y.jsx)(m.a.Subheader,{children:"Load, Save, or Clear your Workspace"})]})}),Object(y.jsxs)(O.a,{children:[Object.keys(e).length," Stories"]}),Object(y.jsxs)(O.a,{children:[Object(y.jsx)(S.a,{color:"green",onClick:function(){Y()},children:"Download Workspace"}),Object(y.jsx)(S.a,{color:"red",onClick:function(){localStorage.clear(),window.location.reload()},children:"Clear Workspace"})]}),Object(y.jsxs)(O.a,{children:[Object(y.jsx)(m.a,{size:"small",children:"Upload Workspace"}),Object(y.jsx)("input",{type:"file",accept:".write",onChange:function(e){return function(e){return Z.apply(this,arguments)}(e.target.files)}})]})]})})}var ne=function(){return Object(y.jsxs)(l.a,{children:[Object(y.jsx)(h,{}),Object(y.jsxs)(j.c,{children:[Object(y.jsx)(j.a,{path:"/data",component:te}),Object(y.jsx)(j.a,{path:"/story/:id",component:q}),Object(y.jsx)(j.a,{path:"/",component:$})]})]})},re=Object(w.a)({reducer:{storyList:z},middleware:function(e){return e().concat([C])}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(143);i.a.render(Object(y.jsx)(o.a.StrictMode,{children:Object(y.jsx)(G.a,{store:re,children:Object(y.jsx)(ne,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},22:function(e,t,n){var r,o,s;o=[n(127)],void 0===(s="function"===typeof(r=function(e){"use strict";var t=e.Reader,n=e.Writer,r=e.util,o=e.roots.default||(e.roots.default={});return o.Timestamp=function(){function s(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return s.prototype.seconds=r.Long?r.Long.fromBits(0,0,!1):0,s.prototype.nanos=0,s.create=function(e){return new s(e)},s.encode=function(e,t){return t||(t=n.create()),null!=e.seconds&&Object.hasOwnProperty.call(e,"seconds")&&t.uint32(8).int64(e.seconds),null!=e.nanos&&Object.hasOwnProperty.call(e,"nanos")&&t.uint32(16).int32(e.nanos),t},s.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},s.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,s=new o.Timestamp;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:s.seconds=e.int64();break;case 2:s.nanos=e.int32();break;default:e.skipType(7&i)}}return s},s.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},s.verify=function(e){return"object"!==typeof e||null===e?"object expected":null==e.seconds||!e.hasOwnProperty("seconds")||r.isInteger(e.seconds)||e.seconds&&r.isInteger(e.seconds.low)&&r.isInteger(e.seconds.high)?null!=e.nanos&&e.hasOwnProperty("nanos")&&!r.isInteger(e.nanos)?"nanos: integer expected":null:"seconds: integer|Long expected"},s.fromObject=function(e){if(e instanceof o.Timestamp)return e;var t=new o.Timestamp;return null!=e.seconds&&(r.Long?(t.seconds=r.Long.fromValue(e.seconds)).unsigned=!1:"string"===typeof e.seconds?t.seconds=parseInt(e.seconds,10):"number"===typeof e.seconds?t.seconds=e.seconds:"object"===typeof e.seconds&&(t.seconds=new r.LongBits(e.seconds.low>>>0,e.seconds.high>>>0).toNumber())),null!=e.nanos&&(t.nanos=0|e.nanos),t},s.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(r.Long){var o=new r.Long(0,0,!1);n.seconds=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.seconds=t.longs===String?"0":0;n.nanos=0}return null!=e.seconds&&e.hasOwnProperty("seconds")&&("number"===typeof e.seconds?n.seconds=t.longs===String?String(e.seconds):e.seconds:n.seconds=t.longs===String?r.Long.prototype.toString.call(e.seconds):t.longs===Number?new r.LongBits(e.seconds.low>>>0,e.seconds.high>>>0).toNumber():e.seconds),null!=e.nanos&&e.hasOwnProperty("nanos")&&(n.nanos=e.nanos),n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),o.Duration=function(){function s(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return s.prototype.seconds=r.Long?r.Long.fromBits(0,0,!1):0,s.prototype.nanos=0,s.create=function(e){return new s(e)},s.encode=function(e,t){return t||(t=n.create()),null!=e.seconds&&Object.hasOwnProperty.call(e,"seconds")&&t.uint32(8).int64(e.seconds),null!=e.nanos&&Object.hasOwnProperty.call(e,"nanos")&&t.uint32(16).int32(e.nanos),t},s.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},s.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,s=new o.Duration;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:s.seconds=e.int64();break;case 2:s.nanos=e.int32();break;default:e.skipType(7&i)}}return s},s.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},s.verify=function(e){return"object"!==typeof e||null===e?"object expected":null==e.seconds||!e.hasOwnProperty("seconds")||r.isInteger(e.seconds)||e.seconds&&r.isInteger(e.seconds.low)&&r.isInteger(e.seconds.high)?null!=e.nanos&&e.hasOwnProperty("nanos")&&!r.isInteger(e.nanos)?"nanos: integer expected":null:"seconds: integer|Long expected"},s.fromObject=function(e){if(e instanceof o.Duration)return e;var t=new o.Duration;return null!=e.seconds&&(r.Long?(t.seconds=r.Long.fromValue(e.seconds)).unsigned=!1:"string"===typeof e.seconds?t.seconds=parseInt(e.seconds,10):"number"===typeof e.seconds?t.seconds=e.seconds:"object"===typeof e.seconds&&(t.seconds=new r.LongBits(e.seconds.low>>>0,e.seconds.high>>>0).toNumber())),null!=e.nanos&&(t.nanos=0|e.nanos),t},s.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(r.Long){var o=new r.Long(0,0,!1);n.seconds=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.seconds=t.longs===String?"0":0;n.nanos=0}return null!=e.seconds&&e.hasOwnProperty("seconds")&&("number"===typeof e.seconds?n.seconds=t.longs===String?String(e.seconds):e.seconds:n.seconds=t.longs===String?r.Long.prototype.toString.call(e.seconds):t.longs===Number?new r.LongBits(e.seconds.low>>>0,e.seconds.high>>>0).toNumber():e.seconds),null!=e.nanos&&e.hasOwnProperty("nanos")&&(n.nanos=e.nanos),n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),o.Story=function(){function s(e){if(this.relatedStoryIds=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return s.prototype.id="",s.prototype.name="",s.prototype.description="",s.prototype.duration=null,s.prototype.relatedStoryIds=r.emptyArray,s.create=function(e){return new s(e)},s.encode=function(e,t){if(t||(t=n.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(10).string(e.id),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.duration&&Object.hasOwnProperty.call(e,"duration")&&o.Duration.encode(e.duration,t.uint32(26).fork()).ldelim(),null!=e.relatedStoryIds&&e.relatedStoryIds.length)for(var r=0;r<e.relatedStoryIds.length;++r)t.uint32(34).string(e.relatedStoryIds[r]);return null!=e.description&&Object.hasOwnProperty.call(e,"description")&&t.uint32(42).string(e.description),t},s.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},s.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,s=new o.Story;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:s.id=e.string();break;case 2:s.name=e.string();break;case 5:s.description=e.string();break;case 3:s.duration=o.Duration.decode(e,e.uint32());break;case 4:s.relatedStoryIds&&s.relatedStoryIds.length||(s.relatedStoryIds=[]),s.relatedStoryIds.push(e.string());break;default:e.skipType(7&i)}}return s},s.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},s.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.id&&e.hasOwnProperty("id")&&!r.isString(e.id))return"id: string expected";if(null!=e.name&&e.hasOwnProperty("name")&&!r.isString(e.name))return"name: string expected";if(null!=e.description&&e.hasOwnProperty("description")&&!r.isString(e.description))return"description: string expected";if(null!=e.duration&&e.hasOwnProperty("duration")){var t=o.Duration.verify(e.duration);if(t)return"duration."+t}if(null!=e.relatedStoryIds&&e.hasOwnProperty("relatedStoryIds")){if(!Array.isArray(e.relatedStoryIds))return"relatedStoryIds: array expected";for(var n=0;n<e.relatedStoryIds.length;++n)if(!r.isString(e.relatedStoryIds[n]))return"relatedStoryIds: string[] expected"}return null},s.fromObject=function(e){if(e instanceof o.Story)return e;var t=new o.Story;if(null!=e.id&&(t.id=String(e.id)),null!=e.name&&(t.name=String(e.name)),null!=e.description&&(t.description=String(e.description)),null!=e.duration){if("object"!==typeof e.duration)throw TypeError(".Story.duration: object expected");t.duration=o.Duration.fromObject(e.duration)}if(e.relatedStoryIds){if(!Array.isArray(e.relatedStoryIds))throw TypeError(".Story.relatedStoryIds: array expected");t.relatedStoryIds=[];for(var n=0;n<e.relatedStoryIds.length;++n)t.relatedStoryIds[n]=String(e.relatedStoryIds[n])}return t},s.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.relatedStoryIds=[]),t.defaults&&(n.id="",n.name="",n.duration=null,n.description=""),null!=e.id&&e.hasOwnProperty("id")&&(n.id=e.id),null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.duration&&e.hasOwnProperty("duration")&&(n.duration=o.Duration.toObject(e.duration,t)),e.relatedStoryIds&&e.relatedStoryIds.length){n.relatedStoryIds=[];for(var r=0;r<e.relatedStoryIds.length;++r)n.relatedStoryIds[r]=e.relatedStoryIds[r]}return null!=e.description&&e.hasOwnProperty("description")&&(n.description=e.description),n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),o.WritingWorkspace=function(){function s(e){if(this.stories=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return s.prototype.stories=r.emptyArray,s.create=function(e){return new s(e)},s.encode=function(e,t){if(t||(t=n.create()),null!=e.stories&&e.stories.length)for(var r=0;r<e.stories.length;++r)o.Story.encode(e.stories[r],t.uint32(10).fork()).ldelim();return t},s.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},s.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,s=new o.WritingWorkspace;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:s.stories&&s.stories.length||(s.stories=[]),s.stories.push(o.Story.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return s},s.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},s.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.stories&&e.hasOwnProperty("stories")){if(!Array.isArray(e.stories))return"stories: array expected";for(var t=0;t<e.stories.length;++t){var n=o.Story.verify(e.stories[t]);if(n)return"stories."+n}}return null},s.fromObject=function(e){if(e instanceof o.WritingWorkspace)return e;var t=new o.WritingWorkspace;if(e.stories){if(!Array.isArray(e.stories))throw TypeError(".WritingWorkspace.stories: array expected");t.stories=[];for(var n=0;n<e.stories.length;++n){if("object"!==typeof e.stories[n])throw TypeError(".WritingWorkspace.stories: object expected");t.stories[n]=o.Story.fromObject(e.stories[n])}}return t},s.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.stories=[]),e.stories&&e.stories.length){n.stories=[];for(var r=0;r<e.stories.length;++r)n.stories[r]=o.Story.toObject(e.stories[r],t)}return n},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),o})?r.apply(t,o):r)||(e.exports=s)}},[[144,1,2]]]);
//# sourceMappingURL=main.e996c849.chunk.js.map